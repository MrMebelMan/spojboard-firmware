; PlatformIO Project Configuration File
; SpojBoard - Smart Panel for Onward Journeys
;
; For Adafruit MatrixPortal ESP32-S3 with HUB75 LED Matrix

[env:adafruit_matrixportal_esp32s3]
platform = espressif32
board = adafruit_matrixportal_esp32s3
framework = arduino

; Memory optimization - Custom OTA partitions (2MB app0 + 2MB app1)
board_build.partitions = partitions_custom.csv

lib_deps =
    ; HUB75 LED Matrix Driver
    https://github.com/mrfaptastic/ESP32-HUB75-MatrixPanel-DMA.git
    ; JSON parsing
    bblanchon/ArduinoJson@^6.21.3
    ; Adafruit GFX (required by display library)
    adafruit/Adafruit GFX Library@^1.11.9
    ; Telnet debugging
    https://github.com/LennartHennigs/ESPTelnet.git

; Build scripts
extra_scripts =
    pre:scripts/build_timestamp.py
    post:scripts/post_build.py

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -Wno-deprecated-declarations

; Serial monitor
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Upload settings
upload_speed = 921600